files:
  "/etc/fstab":
    mode: "000755"
    owner: root
    group: root
    content: |
      # Add swap space configuration
      /swapfile swap swap defaults 0 0

commands:
  01_create_swapfile:
    command: "dd if=/dev/zero of=/swapfile bs=1M count=1024 && mkswap /swapfile && swapon /swapfile"
    ignoreErrors: true

  02_enable_swap:
    command: "swapon -a && free -m"
    ignoreErrors: true

  03_update_fstab:
    command: "echo '/swapfile swap swap defaults 0 0' >> /etc/fstab"
    ignoreErrors: true
